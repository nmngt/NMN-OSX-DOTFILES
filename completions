# ----------------------------------------------------------------------------
#  BASH: Bash Completions
#  $Id$
# ----------------------------------------------------------------------------
# ::::::::::::::::::::::::::::::: vim: set noai noet ru nu ml ts=4 sw=4 tw=0:
# ----------------------------------------------------------------------------
nbe_msg "Loading BASH completions" ${BASH_SOURCE}

# ----------------------------------------------------------------------------
#  ::: SYSTEM COMPLETIONS :::::::::::::::::::::::::::::::::::::::::::::::::::
# ----------------------------------------------------------------------------
if [ -f /etc/bash_completion ] && ! shopt -oq posix; 
then
	source /etc/bash_completion
fi

# ----------------------------------------------------------------------------
#  ::: CUSTOM COMPLETIONS :::::::::::::::::::::::::::::::::::::::::::::::::::
# ----------------------------------------------------------------------------

# load all environment vars from ./bash.d/completions/
if [ -d "${NBE_PATH}/bash.d/completions" ]; 
then
    for file in ${NBE_PATH}/bash.d/completions/*; 
    do
        if [ -r "$file" ]; # && [ "${file#1}"]; 
        then
        	#
        	# HACK: do not load completions with underline in filename
        	#		like "_ssh.bash"
        	#
            f=$(basename $file)
            if [[ "${f:0:1}" == "_" ]]; then
				continue
			fi

            source $file
        fi
    done
fi
